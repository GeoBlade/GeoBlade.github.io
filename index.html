<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="stylesheet" href="styles.css">
  <link rel="icon" type="image/x-icon" href="images/Logo with txt.png" />
  <title>GeoBlade</title>
</head>
<body>
  <div id="map-container">
    <div id="map-grid"></div>
  </div>
  <div id="sidebar">
    <div class="sidebar-header">
        <a href="changelog.html" style="position: absolute; top: 0; right: 0;">
          <img src="images/Logo with txt.png" alt="GeoBlade Icon" id="sidebar-icon" />
        </a>
        <div class="sidebar-socials">
          <a href="https://discord.gg/epR4kQ8kSW" target="_blank" title="Discord">
            <img src="images/Social Icons/Discord Icon.png" alt="Discord" />
          </a>
          <a href="https://www.tiktok.com/@krimson_knights" target="_blank" title="TikTok">
            <img src="images/Social Icons/TikTok Icon.png" alt="TikTok" />
          </a>
          <a href="https://www.youtube.com/@KrimsonKnightsYT" target="_blank" title="YouTube">
            <img src="images/Social Icons/YouTube Icon.png" alt="YouTube" />
          </a>
        </div>
        <br>
    </div>
    <br> <br> <br> <br>
    <label>Upload a Map</label>
    <input type="file" id="mapUpload" />

    <br>

    <label>Upload a Token</label>
    <input type="file" id="tokenUpload" />

    <label>Token Size (px)</label>
    <input type="number" id="tokenSize" value="60" />

    <label>Token Name</label>
    <input type="text" id="tokenName" placeholder="Enter token name" />

    <label style="display: flex; align-items: center; gap: 8px;">
      <input type="checkbox" id="tokenBorderToggle" checked />
      <span>Show Token Border</span>
    </label>

    <label>Token Border Color</label>
    <input type="color" id="tokenBorderColor" value="#ff0000" />

    <br>

    <label>Grid Color</label>
    <input type="color" id="gridColorPicker" value="#000000" /> 

    <br>
    <button onclick="addToken()">Add Token</button>

    <button id="saveWorldBtn">Save World</button>
    <input type="file" id="loadWorldInput" style="display:none" accept=".json" />
    <button id="loadWorldBtn">Load World</button>

    <h3>Initiative Order</h3>
    <ul id="initiative-order"></ul>
    <button id="changelogBtn" class="sidebar-changelog-btn">üìú View Changelog</button>
    <button id="downloadBtn" class="sidebar-download-btn">üì± Download App</button>
  </div>
  <button id="toggleSidebarBtn">‚û§</button>

  <div id="changelogModal" class="modal" style="display:none;">
    <div class="modal-content">
      <span id="closeChangelog" class="close">&times;</span>
      <h2>üìú Changelog</h2>
      <div id="changelogContent">
        <h3>üÜï Latest Features <span class="version-date">- Current</span></h3>
        <ul>
          <li>Gallery-based world save system</li>
          <li>Improved modal popups with better styling</li>
          <li>Enhanced changelog with version dates</li>
        </ul>
        
        <h3>Version 1.2.0 <span class="version-date">- January 27, 2025</span></h3>
        <ul>
          <li>Added gallery save system for worlds</li>
          <li>Converted changelog to centered modal popup</li>
          <li>Enhanced UI/UX with better modal styling</li>
          <li>Improved grid color customization</li>
        </ul>
        
        <h3>Version 1.1.0 <span class="version-date">- January 20, 2025</span></h3>
        <ul>
          <li>Added token border customization</li>
          <li>Improved token management system</li>
          <li>Enhanced initiative order with drag & drop</li>
          <li>Added token preview images in initiative</li>
        </ul>
        
        <h3>Version 1.0.0 <span class="version-date">- January 15, 2025</span></h3>
        <ul>
          <li>Initial release of GeoBlade</li>
          <li>Map upload functionality</li>
          <li>Token system with draggable placement</li>
          <li>Initiative order tracking</li>
          <li>Grid color customization</li>
          <li>Save/Load world states (.json files)</li>
          <li>Responsive sidebar design</li>
        </ul>
      </div>
    </div>
  </div>

  <div id="downloadModal" class="modal" style="display:none;">
    <div class="modal-content download-modal-content">
      <span id="closeDownload" class="close">&times;</span>
      <div class="download-modal-layout">
        <div class="download-content-left">
          <h2>üì± Download GeoBlade</h2>
          <div id="downloadContent">
            <h3>Desktop Versions</h3>
            <div style="display: flex; flex-direction: column; gap: 10px; margin-bottom: 20px;">
              <button class="download-btn" onclick="window.open('#', '_blank')" style="background: #0078D4;">
                üñ•Ô∏è Download for Windows
              </button>
              <button class="download-btn" onclick="window.open('#', '_blank')" style="background: #333;">
                üçé Download for macOS
              </button>
              <button class="download-btn"onclick="window.open('#', '_blank')" style="background: #FD7E14;">
                üêß Download for Linux
              </button>
            </div>
            
            <h3>Mobile Versions</h3>
            <div style="display: flex; flex-direction: column; gap: 10px;">
              <button class="download-btn" onclick="window.open('#', '_blank')" style="background: #34C759;">
                üì± Download for iOS
              </button>
              <button class="download-btn" onclick="window.open('#', '_blank')" style="background: #3DDC84;">
                ü§ñ Download for Android
              </button>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #2A3A5A; border-radius: 8px;">
              <p style="margin: 0; font-size: 0.9em; color: #BBB;">
                üí° <strong>Tip:</strong> The web version works great on all devices! Desktop apps offer additional features like offline mode, <br> better performance and 3D environments.
              </p>
            </div>
          </div>
        </div>
        <div class="download-logo-right">
          <img src="images/Logo with txt.png" alt="GeoBlade Logo" class="download-modal-logo" />
        </div>
      </div>
    </div>
  </div>

  <script src="javascript.js"></script>
  <script>
    // Update changelog button to open modal instead of navigating
    document.getElementById('changelogBtn').onclick = function() {
      document.getElementById('changelogModal').style.display = 'flex';
    };
    
    // Close changelog modal
    document.getElementById('closeChangelog').onclick = function() {
      document.getElementById('changelogModal').style.display = 'none';
    };
    
    // Download modal handlers
    document.getElementById('downloadBtn').onclick = function() {
      document.getElementById('downloadModal').style.display = 'flex';
    };
    
    document.getElementById('closeDownload').onclick = function() {
      document.getElementById('downloadModal').style.display = 'none';
    };
    
    // Close modal when clicking outside
    window.onclick = function(event) {
      const changelogModal = document.getElementById('changelogModal');
      const downloadModal = document.getElementById('downloadModal');
      if (event.target === changelogModal) {
        changelogModal.style.display = 'none';
      }
      if (event.target === downloadModal) {
        downloadModal.style.display = 'none';
      }
    };
  </script>
</body>
</html>
